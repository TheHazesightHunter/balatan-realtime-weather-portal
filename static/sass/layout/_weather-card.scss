.weather-card {
	background: $accent;
	border-radius: 12px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	display: flex;
	flex-direction: column;

	padding: clamp(20px, 2.5vw, 32px);

	@include media-query(767px) {
		padding: clamp(18px, 3vw, 24px);
	}
}

.weather-card__header {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	gap: clamp(8px, 2vw, 12px);
}

.weather-card__title-block {
	flex: 1;
}

.weather-card__title {
	margin: 0;
	line-height: 1.2;
}

.weather-card__station {
	font-size: clamp(12px, 1.2vw, 14px);
	color: $lightest-gray;
	margin-top: 4px;

	i {
		opacity: 0.8;
		margin-right: 4px;
	}
}

.weather-card__main {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: clamp(16px, 3vw, 32px);

	@include media-query(575px) {
		flex-direction: column;
		gap: 16px;
	}
}

.weather-card__icon {
	flex-shrink: 0;
	width: clamp(80px, 10vw, 120px);
	height: clamp(80px, 10vw, 120px);

	img {
		width: 100%;
		height: 100%;
		object-fit: contain;
		filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
	}
}

.weather-card__precipitation {
	text-align: center;
}

.weather-card__main-value {
	font-size: clamp(48px, 8vw, 72px);
	font-weight: 600;
	line-height: 0.9;
	display: flex;
	align-items: baseline;
	justify-content: center;
	gap: clamp(4px, 0.5vw, 8px);
	margin-bottom: clamp(8px, 1.5vw, 16px);

	small {
		font-size: clamp(18px, 3vw, 28px);
		font-weight: 500;
		opacity: 0.95;
	}
}

.weather-card__probability {
	font-size: clamp(13px, 1.5vw, 16px);
	color: rgba($white, 0.95);

	strong {
		font-weight: 700;
		color: $white;
	}
}

// -----------------------------------------------------------------------------
// Advisory Section
// -----------------------------------------------------------------------------
.weather-card__advisory {
	background: rgba($white, 0.15);
	backdrop-filter: blur(10px);
	border-radius: 10px;
	padding: clamp(14px, 2vw, 20px) clamp(16px, 2.5vw, 24px);
	font-size: clamp(13px, 1.4vw, 15px);
	color: rgba($white, 0.95);
	line-height: 1.5;
}

// -----------------------------------------------------------------------------
// Metrics Grid 
// -----------------------------------------------------------------------------
.weather-card__metric {
	background: $white;
	border-radius: 10px;
	padding: clamp(12px, 2vw, 16px) clamp(10px, 1.5vw, 14px);
	display: flex;
	align-items: center;
	gap: clamp(6px, 1vw, 10px);
	min-height: clamp(75px, 10vw, 95px);
	transition: transform 0.2s ease;

	&:hover {
		transform: translateY(-2px);
	}
}

.weather-card__metric-icon {
	width: clamp(32px, 4vw, 44px);
	height: clamp(32px, 4vw, 44px);
	flex-shrink: 0;
	object-fit: contain;
}

.weather-card__metric-content {
	flex: 1;
}

.weather-card__metric-label {
	font-size: clamp(9px, 1vw, 11px);
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: $light-gray;
	line-height: 1.2;
	margin-bottom: 2px;
}

.weather-card__metric-value {
	font-size: clamp(18px, 2.5vw, 26px);
	font-weight: 700;
	color: $dark-gray;
	line-height: 1;

	.unit {
		font-size: clamp(12px, 1.5vw, 16px);
		font-weight: 500;
		color: $light-gray;
		margin-left: 2px;
	}
}

// -----------------------------------------------------------------------------
// Mobile Optimizations 
// -----------------------------------------------------------------------------
@include media-query(575px) {
	.weather-card {
		padding: 16px;
	}

	.weather-card__metric {
		padding: 10px 8px;
		min-height: 70px;
		gap: 6px;
	}

	.weather-card__metric-icon {
		width: 28px;
		height: 28px;
	}

	.weather-card__metric-value {
		font-size: 16px;
	}
}

.map-container {
	height: 100%;
	min-height: clamp(300px, 40vw, 500px);

	@include media-query(991px) {
		min-height: 300px;
	}
}

.weather-card--updating {
	opacity: 0.95;
	transition: opacity 0.3s ease;
}

.weather-card--pulse {
	animation: weatherCardPulse 0.5s ease;
}

@keyframes weatherCardPulse {
	0%,
	100% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.005);
	}
}

.weather-card__last-update {
	font-size: 0.75rem;
	opacity: 0.7;
	margin-top: 0.25rem;

	color: rgba(255, 255, 255, 0.8);
}

.weather-card__metric-value,
.weather-card__main-value {
	transition: all 0.3s ease;
}

@keyframes fadeInValue {
	from {
		opacity: 0.5;
		transform: translateY(-2px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Apply animation when values update */
.weather-card__metric-value.updated,
.weather-card__main-value.updated {
	animation: fadeInValue 0.3s ease;
}

/* Smooth icon transitions */
.weather-card__icon img {
	transition: opacity 0.3s ease;
}

/* Loading spinner for weather card (if needed) */
.weather-card__loading {
	position: absolute;
	top: 1rem;
	right: 1rem;
	width: 20px;
	height: 20px;
	border: 2px solid rgba(255, 255, 255, 0.3);
	border-top-color: rgba(255, 255, 255, 0.8);
	border-radius: 50%;
	animation: spin 0.8s linear infinite;
	opacity: 0;
	transition: opacity 0.3s ease;
}

.weather-card--updating .weather-card__loading {
	opacity: 1;
}

@keyframes spin {
	to {
		transform: rotate(360deg);
	}
}

/* Advisory text smooth transitions */
.weather-card__advisory {
	transition: all 0.4s ease;
}

/* Highlight critical advisories */
.weather-card__advisory[style*="color: #ef4444"],
.weather-card__advisory:has(span[style*="color: #ef4444"]) {
	background-color: rgba(239, 68, 68, 0.1);
	padding: 0.75rem;
	border-radius: 0.5rem;
	border-left: 3px solid #ef4444;
}

/* Manual refresh button (if you add one) */
.weather-card__refresh-btn {
	position: absolute;
	top: 1rem;
	right: 1rem;
	background: rgba(255, 255, 255, 0.2);
	border: none;
	border-radius: 50%;
	width: 36px;
	height: 36px;
	display: flex;
	align-items: center;
	justify-content: center;
	color: white;
	cursor: pointer;
	transition: all 0.3s ease;
	opacity: 0.7;
}

.weather-card__refresh-btn:hover {
	background: rgba(255, 255, 255, 0.3);
	opacity: 1;
	transform: rotate(0deg);
}

.weather-card__refresh-btn:active {
	transform: rotate(180deg);
}

.weather-card__refresh-btn i {
	font-size: 1rem;
}

/* Error state styling */
.weather-card--error .weather-card__advisory {
	background-color: rgba(239, 68, 68, 0.15);
	border-left: 4px solid #ef4444;
	padding: 1rem;
	border-radius: 0.5rem;
}

.weather-card--error .weather-card__advisory a {
	color: white;
	text-decoration: underline;
	font-weight: 600;
}

.weather-card--error .weather-card__advisory a:hover {
	color: rgba(255, 255, 255, 0.9);
}

/* Success flash on successful update */
@keyframes successFlash {
	0%,
	100% {
		box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
	}
	50% {
		box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3);
	}
}

.weather-card--success {
	animation: successFlash 0.6s ease;
}

/* Responsive adjustments */
@media (max-width: 991px) {
	.weather-card__refresh-btn {
		width: 32px;
		height: 32px;
	}

	.weather-card__last-update {
		font-size: 0.7rem;
	}
}


@media (prefers-color-scheme: dark) {
	.weather-card--updating {
		opacity: 0.9;
	}

	.weather-card__loading {
		border-color: rgba(255, 255, 255, 0.2);
		border-top-color: rgba(255, 255, 255, 0.6);
	}
}


@media print {
	.weather-card__refresh-btn,
	.weather-card__loading,
	.weather-card__last-update {
		display: none !important;
	}
}
.weather-card__data-time {
	font-family: poppins, sans-serif;
	font-size: clamp(12px, 1.2vw, 14px);
	color: $lightest-gray;
	margin-top: 4px;
	font-weight: 400;

	i {
		opacity: 0.7;
		margin-right: 4px;
	}
}

.weather-card__latest-reading {
	font-family: poppins, sans-serif;
	font-size: clamp(12px, 1.2vw, 14px);
	color: rgba(255, 255, 255, 0.9);
	background: rgba(255, 255, 255, 0.1);
	padding: 4px 6px;
	border-radius: 3px;
}


.weather-card__data-time--updated {
	animation: dataTimestampPulse 0.6s ease-out;
}

@keyframes dataTimestampPulse {
	0% {
		background-color: rgba(255, 255, 255, 0.2);
		transform: scale(1);
	}
	50% {
		background-color: rgba(255, 255, 255, 0.3);
		transform: scale(1.05);
	}
	100% {
		background-color: transparent;
		transform: scale(1);
	}
}

/* Responsive adjustments */
@media (max-width: 576px) {
	.weather-card__data-time {
		font-size: 0.7rem;
	}

	.weather-card__latest-reading {
		font-size: 0.65rem;
		padding: 1px 4px;
	}
}
